<p class="teamname"><%= "#{@team.fll_number} #{@team.team_name}" %></p>

<table border="1" width="1024" style="border-collapse:collapse;">
	<th rowspan="2">Match</th>
	<th rowspan="2">Table</th>
	<th rowspan="2">Points</th>	
	<% $challenge.missions.each do |mission| -%>	
		<th colspan=<%= mission.items.length %> ><%= mission.description -%></th>
	<% end %>
	</tr>

	<tr>
	<% $challenge.missions.each do |mission|
	  	 mission.items.each do |item| -%>
			<th align="center"><%= item.label.to_s.titleize -%></th>
	<%   end
	   end %>
	</tr>
	
	<tr>
	<th colspan="3"></th>
	<% $challenge.missions.each do |mission| 
		mission.items.each do |item| -%>
	<th><%= item.scoring -%></th>
	<% 	end
	 end %>
	</tr>

	<tr>
		<td colspan="22" style="background-color: yellow"><%= "#{pluralize(@qualifications.length, "Qualification")}" %> - Average score: <%= @team.average_qual_score %></td>
	</tr>
	<% 	@qualifications.each do |match| -%>
	<tr align="center">
	
	<td><%= link_to match.match_number, edit_polymorphic_path([@team, match]) -%></td>
	<td><%= match.table_number %></td>
	<%= "<td>#{match.score}</td>".html_safe -%>
	<%	$challenge.missions.each do |mission|
			mission.items.each do |item|
				value = match.results[item.label]
				score = value.to_i * item.scoring.to_i
				if value != " " and $challenge.type_of(item.label) == :boolean
			        value = ["N","Y"][value]
			    end
	%>
				<td><%= value.to_s + " (" + score.to_s + ")" %></td>
	<%		end
		end	%>
	</tr>	
	<% end 	%>
	
	<tr>
		<td colspan="22" style="background-color: yellow"><%= "#{pluralize(@finals.length, "Final")}" %></td>
	</tr>
		<% 	@finals.each do |match| %>
		<tr align="center">
	
		<td><%= link_to match.match_number, edit_polymorphic_path([@team, match]) %></td>
		<td><%= match.table_number %></td>
		<td><%= match.score %></td>
		<%	$challenge.missions.each do |mission|
				mission.items.each do |item|
					value = match.results[item.label]
					score = value.to_i * item.scoring.to_i
					if value != " " and $challenge.type_of(item.label) == :boolean
				        value = ["N","Y"][value]
				    end
		%>
					<td><%= value.to_s + " (" + score.to_s + ")" %></td>
		<%		end
			end	%>
		</tr>	
	<% end 	%>
	
</table>

<p>Add: <%= link_to 'Robot Score', new_team_robot_score_path(@team) %> |
	<%= link_to 'Project Score', new_team_project_score_path(@team)  %> | 
	<%= link_to 'Core Value Score', new_team_corevalue_score_path(@team)  %></p>
		
<%= link_to 'Edit', edit_team_path(@team) -%> |
<%= link_to 'Team List', teams_path -%>

<h2>Robot Scores</h2>

<%	
	@team.robot_scores.each do |robot_score|
%>
	<p>Judge: <%= link_to robot_score.judge_name, edit_team_robot_score_path(@team, robot_score)%></p>
	<%= render :partial => "robot", :object => robot_score %>
<%	end %>


<h2>Project Scores</h2>

<%
	@team.project_scores.each do |project_score|
%>
		<p>Judge: <%= link_to project_score.judge_name, edit_team_project_score_path(@team, project_score) %></p>
		<%= render :partial => "project", :object => project_score %>
<%	end %>
</ol>

<h2>Core Values Scores</h2>

<%
	@team.corevalue_scores.each do |corevalue_score|
%>
		<p>Judge: <%= link_to corevalue_score.judge_name, edit_team_corevalue_score_path(@team, corevalue_score) %></p>
		<%= render :partial => "corevalue", :object => corevalue_score %>
<%	end %>